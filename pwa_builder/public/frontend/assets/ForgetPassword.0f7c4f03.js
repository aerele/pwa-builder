import{_ as F,l as o,a as y,e as T,o as _,f as v,n as a,g as n,w as m,u as p,q as U,A as $,x as b,z as k,j as q,v as C,T as E,J as N,K as R}from"./vendor.412e1a19.js";const B=c=>(N("data-v-5fa40d0e"),c=c(),R(),c),G={class:"min-h-screen bg-[#f4f5f7] flex justify-center items-center"},H={class:"w-full max-w-lg sm:w-96 bg-white rounded-lg p-6 shadow-md"},I={class:"w-full flex justify-center mb-4"},O=["src"],A=B(()=>a("div",{class:"text-center mb-4"},[a("p",{class:"font-medium text-xl"},"Forget Password")],-1)),D={key:0,class:"text-red-500 text-xs mb-4"},J={class:"text-center"},M={class:"fixed bottom-0 w-full max-w-lg sm:w-96 p-3"},z={key:0,class:"w-full p-2 text-sm leading-5 text-white bg-blue-500 rounded-lg opacity-100 animate-slide-in-right animate-fade-out"},K={__name:"ForgetPassword",setup(c){const h=o(""),i=o(""),l=o(""),w=o(!1),d=o(!1),g=y(()=>!!i.value),P=o(window.location.href),u=y(()=>{const e=new URL(P.value);return`${e.protocol}//${e.hostname}`});u.value=u.value+":8003/assets";const S=o(`${u.value}:8003/assets`),L=o(`${u.value}:8003/`),V=()=>{const e=new Headers;e.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const r={method:"GET",headers:e,redirect:"follow"};fetch(S.value,r).then(t=>t.text()).then(t=>{const x=new DOMParser().parseFromString(t,"text/html").querySelector('link[rel="shortcut icon"]');x&&(h.value=x.href)}).catch(t=>console.error(t))},j=()=>{if(w.value=!0,!g.value)return;d.value=!0;const e=new Headers;e.append("Content-Type","application/json");const r=JSON.stringify({cmd:"frappe.core.doctype.user.user.reset_password",user:i.value}),t={method:"POST",headers:e,body:r,redirect:"follow"};fetch(L.value,t).then(s=>{s.text().then(f=>{d.value=!1,s.status===200?(l.value="Password reset instructions have been sent to your email",console.log(f)):s.status===404?(l.value="User Mail Not Found",console.log(f)):s.status===501?l.value="Please setup default Email Account from Settings > Email Account":l.value="You hit the rate limit because of too many requests. Please try after sometime.",setTimeout(()=>{l.value=""},1e3)})}).catch(s=>{d.value=!1,console.error(s)})};return V(),(e,r)=>{const t=T("router-link");return _(),v("div",G,[a("div",H,[a("div",I,[a("img",{src:h.value,class:"w-16 h-16 object-cover rounded-lg"},null,8,O)]),A,a("div",null,[n(p($),{required:"",type:"text",label:"Email",name:"email",modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=s=>i.value=s),placeholder:"johndoe@email.com",class:"mb-4"},{prefix:m(()=>[n(p(U),{class:"w-4",name:"mail"})]),_:1},8,["modelValue"]),w.value&&!g.value?(_(),v("div",D," Enter email! ")):b("",!0),a("div",null,[n(p(q),{loading:d.value,variant:"solid",class:"w-full mb-4",onClick:j},{default:m(()=>[k(" Reset Password ")]),_:1},8,["loading"])]),a("div",J,[n(t,{to:"/",class:"text-sm font-medium text-black hover:underline"},{default:m(()=>[k(" Back to Login ")]),_:1})])])]),a("div",M,[n(E,{name:"fade"},{default:m(()=>[l.value?(_(),v("div",z,C(l.value),1)):b("",!0)]),_:1})])])}}};var Q=F(K,[["__scopeId","data-v-5fa40d0e"]]);export{Q as default};
